from io import StringIO

import numpy as np
import pandas as pd

from ..structure import LinearGaussianSCM


education_fertility = StringIO("""
DADSO,RACE,NOSIB,FARM,REGN,ADOLF,REL,YCIG,FEC,ED,AGE
456.67,-0.92,-15.82,-3.244,-1.32,-0.463,0.4768,-0.314,0.2356,18.66,16.213
-0.92,0.089,0.1416,0.0124,0.0451,0.0174,-0.0191,0.0031,0.0031,-0.1567,-0.2305
-15.82,0.1416,9.212,0.3908,0.2181,-0.0458,0.0179,0.0291,0.0018,-2.349,-1.423
-3.244,0.0124,0.3908,0.2209,0.0491,-0.0055,-0.0295,0.0096,-0.0045,-0.2052,-0.2262
-1.32,0.0451,0.2181,0.0491,0.2294,0.0132,-0.0489,0.0018,-0.0039,-0.2385,-0.3458
-0.463,0.0174,-0.0458,-0.0055,0.0132,0.1498,-0.0085,0.0089,0.0021,-0.1434,0.1752
0.4768,-0.0191,0.0179,-0.0295,-0.0489,-0.0085,0.1772,-0.0014,-0.0003,-0.0119,0.1683
-0.314,0.0031,0.0291,0.0096,0.0018,0.0089,-0.0014,0.117,0.0009,-0.138,0.1702
0.2356,0.0031,0.0018,-0.0045,-0.0039,0.0021,-0.0003,0.0009,0.0888,0.0267,0.2626
18.66,-0.1567,-2.349,-0.2052,-0.2385,-0.1434,-0.0119,-0.138,0.0267,5.5696,3.658
16.213,-0.2305,-1.423,-0.2262,-0.3458,0.1752,0.1683,0.1702,0.2626,3.658,16.6832
""")

education_fertility = pd.read_csv(education_fertility)
education_fertility = LinearGaussianSCM(
    education_fertility.columns,
    np.linalg.cholesky(education_fertility).T
)
